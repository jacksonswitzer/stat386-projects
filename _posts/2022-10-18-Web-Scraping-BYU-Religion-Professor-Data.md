---
layout: post
title: "Web Scraping BYU Religion Faculty Data"
date: 2022-10-17
author: Jackson Switzer
description: Pulling contact info, job titles, and Rate My Professor ratings about all present and past faculty and staff from the BYU Religious Education Department
image: /assets/images/bookofmormon.png
---

First, a disclaimer: All the data I scraped for this project is publicly available. I am a BYU student, but I was never required to log into my BYU account to access the information I share here about the professors. Rate My Professors is also a public site, with all ratings accessible via Google search without logging in. And my resulting dataset is relatively small (only a few hundred lines), so I never made enough requests to risk overwhelming their servers. (Always be courteous when you're scraping.)

## Intro: Why would I want a table of information about religion professors?

My biggest long-term professional goal is to become a BYU religion professor. BYU religion professors come from a variety of educational backgrounds, ranging from family science to philosophy to ancient near eastern studies. My junior year of college, I started thinking seriously about what I wanted to study in grad school, and a natural step was to get to know more religion professors so I could better understand their academic paths. But as an undergraduate statistics major and math minor, I've didn't naturally form relationships with much faculty of the religion department. I had to be proactive in finding out which religion faculty did research in topics that interested me and seeking out opportunities to talk with them. It would have been useful to have their contact info and other information easily accessible.

I've also been a heavy user of [Rate My Professors](https://www.ratemyprofessors.com/) throughout college and thought it would be interesting to compare the average ratings of full professors with those of associate and adjunct professors.

If you're in a similar situation, I hope this tutorial can help get you on the right track!

## Web Scraping Process

To pull data from [the BYU website](https://religion.byu.edu/directory), I primarily used the Python packages `requests` and `BeautifulSoup`, with the occasional help of some regular expressions and a unicode reformatting function. Import the following:

```
from bs4 import BeautifulSoup as bs
import numpy as np
import pandas as pd
import requests
import re
import unicodedata
```

Then, get the HTML of the BYU religion faculty website and BeautifulSoup it into something workable. The third line creates a list in which each element is a tag containing one professor's thumbnail of information.

```
og_html = requests.get('https://religion.byu.edu/directory')
s = bs(og_html.text)
profs = s.find_all('h3', class_="PromoVerticalImage-title promo-title")
```

From this point on, I essentially repeated three simple steps for each piece of data I wanted:

## Overarching Steps

1. Find the tag containing the piece of data in the BeautifulSoup object `s`
2. Loop through each tag, extracting the string of interest from each one and putting them into a list
3. Clean excess characters from the strings

### Example 1

To get the full names of each professor, I first explored element 0 of `profs` to find the location of the names, which turned out to be the `'a'` tags. Then I did the following:

```
names = [i.find('a').text for i in profs]
names = list(map(lambda x: unicodedata.normalize("NFKD", x), names))
```

The first line pulls out the names; the second line cleans them up to a nice format.

### Example 2

To get the professors' teaching areas (Ancient Scripture, Religious Education, Church History and Doctrine, etc.), I did the following (the basic structure is, again, the three steps listed above):

```
areas = [None] * len(profs)   # First, initialize a list of the proper length
for i in range(len(profs)):   # Loop through the professors' info tags
    try:   # Some professors didn't have a parent class, which means they had no teaching area; the try/except block sets these cases to None
        areas[i] = profs[i].parent.find(class_="PromoVerticalImage-groups").text   # Move up to the parent class, which contains the teaching areas
    except AttributeError:
        areas[i] = None
areas = [i.split(', ') for i in areas]   # If a professor has multiple teaching areas, they are separated into a list
```

## Getting Rate My Professors Data

The trickiest part was getting data from Rate My Professors; it doesn't have an API. However, I noticed a pattern in the URLs generated by searching a name in its catalog of BYU Professors (to find this, go to the main homepage and search "Brigham Young University" in the "Your school" search box). Using an f-string, I altered a base URL format to search for each professor and then get the HTML from each search result:

```
rmp_searches = [None] * len(profs)   # Again, intialize a list of the appropriate size
for i in range(len(profs)):
    splitname = names[i].split(' ')   # Get the first and last name of each professor you want to search, using your previously created name variable
    firstname = splitname[0]
    lastname = splitname[-1]
    r = requests.get(f'https://www.ratemyprofessors.com/search/teachers?query={firstname}%20{lastname}&sid=U2Nob29sLTEzNQ==')   # Make the URL
    rmp_searches[i] = bs(r.text)   # Save the BeautifulSouped HTML from each search result
```

Once you have `rmp_searches`, you can find each professor's rating inside the link produced by searching his or her name. Repeat for retired faculty, if you like (I did).

## Conclusion

There's a lot of potential for this project. You could adapt it to any department at any university. Each university will have a differently formatted website, so that part would take some adjusting, but Rate My Professors the same website no matter the university, so you'd only have to change the URL. Give it a try!

Next time, I'll analyze whether professors' ranks (full professor, associate professor, or adjunct) or teaching area are correlated with their Rate My Professors rating. (My hunch, based on experience, is that full professors will have a lower average rating than those of lower rank. When they've been around too long, they get boring.)

Here's the link to my GitHub repo containing all the code for this project: [https://github.com/jacksonswitzer/hw5](https://github.com/jacksonswitzer/hw5)
